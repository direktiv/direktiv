
/api/v2/namespaces/{namespace}/gateway/consumers:
  get:
    tags:
      - gateway
    summary: Get all consumers
    parameters:
      - $ref: '../parameters.yaml#/namespace'
    responses:
      "200":
        description: Consumers for gateway in the namespace
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: array
                  items:
                    type: object
                    properties:
                      username:
                        type: string
                        description: unique username
                      password:
                        type: string
                        description: password for basic authentication
                      api_key:
                        type: string
                        description: api key for the user
                      tags:
                        type: array
                        nullable: true
                        items:
                          type: string
                          description: tag identifier
                      groups:
                        type: array
                        nullable: true
                        items:
                          type: string
                          description: group identifier

/api/v2/namespaces/{namespace}/gateway/info:
  get:
    tags:
      - gateway
    summary: Get config file
    description: |-
      A basic OpenAPI config file is not required but can add context to the API provided by the gateway.
      If none is provided Direktiv generates a virtual one with a basic configuration. The paths section
      is autogenerated based on the route files provided in the namespace.
    parameters:
      - $ref: '../parameters.yaml#/namespace'
      - in: query
        name: expand
        schema:
          type: string
        description: Includes all relative files into one OpenAPI spec file
    responses:
      "200":
        description: Basic configuration file for gateway in the namespace
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: array 
                  items:  
                    type: string
                    description: list of errors in config, e.g. unknown parameters in config
                warnings:
                  type: array 
                  items:  
                    type: string
                    description: list of warnings in config itself
                file_path:
                  type: string
                  description: path to file in file tree
                  example: /my/path.yaml
                spec:
                  type: object
                  description: |-
                    contains an OpenAPI spec object. The paths section is replaced based on the routes in the namespace. 


/api/v2/namespaces/{namespace}/gateway/routes:
  get:
    tags:
      - gateway
    summary: Get all routes
    parameters:
      - $ref: '../parameters.yaml#/namespace'
      - in: query
        name: path
        schema:
          type: string
        description: Filter result by path string
    responses:
      "200":
        description: Routes for gateway in the namespace
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: array
                  items:
                    $ref: '../objects.yaml#/route'
